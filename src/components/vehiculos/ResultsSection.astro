---
interface Props {
  children?: any
}

const { children } = Astro.props
---

<section class="catalog__results" aria-label="Resultados de búsqueda">
  <header class="results-header">
    <div>
      <p class="results-eyebrow">Inventario disponible</p>
      <h2>Vehículos listos para entregar</h2>
    </div>
    <p>
      Los resultados se muestran automáticamente según el filtro seleccionado. Nuestros asesores validan la
      disponibilidad de cada unidad en tiempo real.
    </p>
  </header>

  <div class="results-pagination" data-pagination-anchor="top" aria-label="Navegación de páginas"></div>

  <div id="vehiculos-lista" class="results-grid" aria-live="polite" aria-label="Lista de vehículos">
    {children}
  </div>

  <div class="results-error" data-results-error hidden aria-live="assertive"></div>

  <div class="results-pagination" data-pagination-anchor="bottom" aria-label="Navegación de páginas"></div>
</section>

<style>
  .catalog__results {
    display: grid;
    gap: 1.75rem;
    padding: clamp(1.8rem, 4vw, 2.4rem);
    border-radius: 1.75rem;
    background: rgba(var(--surface-card-rgb), 0.88);
    border: 1px solid var(--surface-border);
    box-shadow: 0 24px 55px -38px rgba(var(--surface-panel-rgb), 0.52);
  }

  .catalog__results p {
    margin: 0;
    color: var(--text-secondary);
    line-height: 1.7;
  }

  .results-error {
    margin: 0;
    color: var(--color-error, #b91c1c);
    background: rgba(248, 113, 113, 0.18);
    border: 1px solid rgba(248, 113, 113, 0.35);
    padding: 1rem 1.25rem;
    border-radius: 1rem;
    font-size: 0.95rem;
    display: none;
  }

  .results-error[hidden] {
    display: none;
  }

  .results-error.is-visible {
    display: block;
  }

  .results-header {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: space-between;
    align-items: flex-end;
  }

  .results-header h2 {
    font-size: clamp(1.6rem, 3vw, 2rem);
  }

  .results-grid {
    min-height: 325px;
  }

  :global(.results-pagination) {
    display: flex;
    justify-content: center;
    background: rgba(var(--surface-card-alt-rgb), 0.52);
    box-shadow: 0 18px 38px -30px rgba(var(--surface-panel-rgb), 0.5);
    backdrop-filter: blur(8px);
    border-radius: 9999px;
    border: 1px solid var(--surface-border);
  }

  @media (max-width: 900px) {
    .catalog__results {
      padding: clamp(1.2rem, 4vw, 1.7rem);
    }
  }

  @media (max-width: 768px) {
    .results-header {
      flex-direction: column;
      align-items: flex-start;
    }
  }

  @media (max-width: 640px) {
    .catalog__results {
      padding: clamp(1.2rem, 6vw, 1.6rem);
      border-radius: 1.35rem;
    }

    .results-grid {
      min-height: 320px;
    }
  }

  @media (max-width: 480px) {
    .catalog__results {
      padding: clamp(1rem, 6vw, 1.4rem);
    }
  }
</style>
