---
import type { Marca } from '../types'

interface Props {
  marcas: Marca[]
}

const { marcas } = Astro.props
---

<div
  class="wrapper mb-4 w-full flex flex-col gap-3 rounded-xl border border-gray-200 bg-gray-50 p-4 shadow-sm"
  role="search"
>
  <div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between">
    <label for="marca-select" class="text-sm font-semibold uppercase tracking-wide text-contrast-high">
      Filtrar por marca
    </label>
    <p id="marca-help" class="text-xs text-contrast-high leading-snug">
      Usa este filtro para mostrar solo vehículos de una marca específica.
    </p>
  </div>
  <div
    class="group relative w-full overflow-hidden rounded-lg border border-gray-200 bg-white/70 shadow-sm backdrop-blur-sm transition focus-within:border-blue-500 focus-within:ring-4 focus-within:ring-blue-100"
  >
    <svg
      class="pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-contrast-medium transition-colors group-focus-within:text-blue-500 z-10"
      viewBox="0 0 24 24"
      aria-hidden="true"
      focusable="false"
    >
      <path
        fill="currentColor"
        d="M3 4a1 1 0 0 1 1-1h16a1 1 0 0 1 .832 1.555L15 11.25V17a1 1 0 0 1-.447.832l-3 2A1 1 0 0 1 10 19v-7.75L3.168 4.555A1 1 0 0 1 3 4Z"
      ></path>
    </svg>
    <select
      id="marca-select"
      name="marca"
      aria-label="Selecciona una marca de vehículo para filtrar"
      aria-describedby="marca-help"
      class="block w-full appearance-none border-0 bg-transparent py-2.5 pl-9 pr-10 text-sm text-contrast-high outline-none focus:outline-none"
    >
      <option value="">Todas las marcas</option>
      {marcas.map(marca => <option value={marca.id}>{marca.title}</option>)}
    </select>
    <svg
      class="pointer-events-none absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-contrast-medium transition-transform group-focus-within:rotate-180 group-focus-within:text-blue-500 z-10"
      viewBox="0 0 24 24"
      aria-hidden="true"
      focusable="false"
    >
      <path fill="currentColor" d="m7 9 5 5 5-5H7z"></path>
    </svg>
  </div>
</div>

<style>
  .wrapper {
    background: linear-gradient(135deg, rgba(var(--color-white-rgb), 0.92), rgba(var(--color-primary-soft-rgb), 0.35));
  }
</style>
